<h1>Users</h1>

<% @users.each do |user| %>
  <div>
    <p><b><%= user.name %></b> (<%= user.email %>)</p>
    <% if @friends.include?(user) %>
      <p> You are already friends! </p>
    <% elsif @sent_friendship_requests.include?(user) %>
      <p>Friend request sent.</p>
    <% elsif @received_friendship_requests.include?(user) %>
      <p>Friend request received.</p>
      <%= link_to 'Accept Friend Request', friendship_path(current_user.received_friendships.find_by(sender_id: user.id)), method: :patch, class: 'btn btn-success', data: { 'turbo-method': :patch } %>
      <%= link_to 'Reject Friend Request', friendship_path(current_user.received_friendships.find_by(sender_id: user.id)), method: :delete, class: 'btn btn-danger', data: { 'turbo-method': :delete } %>
    <% else %>
      <%= link_to 'Send Friend Request', friendships_path(receiver_id: user.id), method: :post, class: 'btn btn-primary', data: { 'turbo-method': :post } %>
    <% end %>
  </div>
<% end %>
